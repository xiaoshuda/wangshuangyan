<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <title>Do It</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--jQuery References-->
    
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="css/jquery.mobile-1.3.1.css" rel="stylesheet" type="text/css" title="rocket-jqueryui">

    <!--Wijmo Widgets CSS-->
    <link href="css/jquery.wijmo-pro.all.3.20131.7.min.css" rel="stylesheet" type="text/css">

    <!--Wijmo Widgets JavaScript-->
    <script src="js/jquery.wijmo-open.all.3.20131.7.min.js" type="text/javascript"></script>
    <script src="js/jquery.wijmo-pro.all.3.20131.7.min.js" type="text/javascript"></script>
   
</head>
<body>
<div data-role="page" data-theme="c" id="l1" data-position="fixed">


            <div data-role="header" data-theme="d" data-position="fixed">
                <a href="index.html" data-ajax="false" data-icon="back">Back</a>
		<h4>主题分布情况</h4>
            </div>
            <div data-role="content" data-theme="c">
			<div id="wijbubblechart" data-role="wijbubblechart">
			</div>
			<div class="togbuttons">
				<button id="Btn1910">
					1910</button>
				<button id="Btn2010" data-theme="b">
					2010</button>
			</div>
	    </div>
	   <div data-role="footer" data-theme="d" data-position="fixed">
                <h4>这是尾部信息～</h4>
           </div>


<script type="text/javascript">
		$(document).bind('pageinit',function(){ 
			//$(document).bind( "pagebeforechange", beforechange);
			$(document).bind("pagechange",afterchange);
		});
		//转场成功之前触发，
		function beforechange( e, data ) {
		}
		function afterchange(e,data){	
				/*var data2010 = [{
					label: "信用卡",
					legendEntry: true,
					data: { y: [73], x: [7931], y1: [1340] }
				}, {
					label: "贷款",
					legendEntry: true,
					data: { y: [65], x: [2972], y1: [1150] }
				}, {
					label: "期货",
					legendEntry: true,
					data: { y: [78], x: [42066], y1: [309] }
				}, {
					label: "效益",
					legendEntry: true,
					data: { y: [83], x: [30866], y1: [126] }
				}, {
					label: "回报率",
					legendEntry: true,
					data: { y: [69], x: [14318], y1: [140] }
				}, {
					label: "股权",
					legendEntry: true,
					data: { y: [48], x: [374], y1: [72] }
				}, {
					label: "网上银行",
					legendEntry: true,
					data: { y: [52], x: [9284], y1: [43] }
				}, {
					label: "理财产品",
					legendEntry: true,
					data: { y: [77], x: [11754], y1: [112] }
				}, {
					label: "员工福利",
					legendEntry: true,
					data: { y: [80], x: [31217], y1: [61] }
				}];

				var data1910 = [{
					label: "信用卡",
					legendEntry: true,
					data: { y: [32], x: [810], y1: [423] }
				}, {
					label: "贷款",
					legendEntry: true,
					data: { y: [23], x: [692], y1: [249] }
				}, {
					label: "期货",
					legendEntry: true,
					data: { y: [52], x: [7914], y1: [93] }
				}, {
					label: "效益",
					legendEntry: true,
					data: { y: [40], x: [1883], y1: [50] }
				}, {
					label: "股权",
					legendEntry: true,
					data: { y: [36], x: [1842], y1: [80] }
				}, {
					label: "回报率",
					legendEntry: true,
					data: { y: [32], x: [602], y1: [11] }
				}, {
					label: "网上银行",
					legendEntry: true,
					data: { y: [34], x: [2864], y1: [5.9] }
				}, {
					label: "理财产品",
					legendEntry: true,
					data: { y: [27], x: [2102], y1: [15] }
				}, {
					label: "员工福利",
					legendEntry: true,
					data: { y: [54], x: [6489], y1: [42] }
				}];*/
	$.ajax({
		type : "POST",
		url  : "http://9.181.142.107:8082/FinalDemo/AndroidController",			
		data : {'flag':'analysis','keyWord':'topic','load':'true'},
		success : function(data) {
			var result = eval("("+data+")");
			var card = result.信用卡;
			var bank = result.网上银行;
			var measure = result.贷款额度;

//var data1 ={ x: [2006, 2007, 2008, 2009, 2010],y: [5, 6, 8, 7, 8.5], y1: [4, 4.4, 5.1, 5.5, 5.7]};
//var data2= { x: [2006, 2007, 2008, 2009, 2010],y: [3, 4, 6, 7.5, 8], y1: [2, 2.5, 3, 4, 5]};
//var data3 ={ x: [2006, 2007, 2008, 2009, 2010],y: [4, 5, 6.5, 7.3, 6.6], y1: [2, 2.5, 4.5, 6, 5.5]};
//var data4 = { x: [2006, 2007, 2008, 2009, 2010],y: [6, 1, 5, 2, 4], y1: [2, 3, 4.5, 1.5, 1]};	
			$("#wijbubblechart").wijbubblechart("beginUpdate").wijbubblechart({
					//minimumSize: 3,
					//MaximumSize: 5,
					chartLabel: {
						chartLabelFormatString: ""
					},
					axis: {
						y: {
							text: "关注度"

						},
						x: {
							text: ""
						}
					},
					hint: {
						content: function () {
							return  this.label+'有' + this.y + "条微博关注";
						}
					},
					header: {
						text: "各主题三个季度以来的微博关注度"
					},
					seriesList: [{
						label: "信用卡",
						legendEntry: true,
						data: card
					}, {
						label: "网上银行",
						legendEntry: true,
						data:bank
					}, {
						label: "贷款额度",
						legendEntry: true,
						data: measure
					}],
					//bubbleChart上的click事件
					click : function (e, args) { 						
						var label = args.label;//获取主题
						var quarter = args.data.x[args.index];//获取季度
					    alert("当前选中的主题为'"+quarter+"的"+args.label+"'\n\n将跳转至对应的数据页面中.....");
							//+args.value
					//页面转场跳转到topic2.html,并将信息传递过去	
					     $.mobile.changePage( "topic2.html", { 
							type: "get",
							data: {
								name:"chufei",
								topic:label,
								quarter:quarter			
							},
							transition: "slideup"
					     });

					}
				}).wijbubblechart("endUpdate");
				/*$("#wijbubblechart").wijbubblechart("beginUpdate").wijbubblechart({
					//showChartLabels: false,
					minimumSize: 3,
					MaximumSize: 5,
					chartLabel: {
						chartLabelFormatString: "c2'kkk'"
					},
					axis: {
						y: {
							text: "Life Expectancy",
							autoMin: false,
							autoMax: false,
							min: 0,
							max: 100000
						},
						x: {
							text: "Income",
							autoMin: false,
							autoMax: false,
							min: 0,
							max: 20
						}
					},
					hint: {
						content: function () {
							return "" + this.data.label + ": " + this.data.y + "人关注";
						}
					},
					header: {
						text: "1910年与2010年的主题分布概况"
					},
					seriesList: [
						{
						label: "信用卡",
						legendEntry: true,
						data: card

						},{
						label: "网上银行",
						legendEntry: true,
						data: bank
						},{
						label: "贷款额度",
						legendEntry: true,
						data: measure
						},{
						label: "证券",
						legendEntry: true,
						data: securities
					}],
					//seriesList: data2010,
					//bubbleChart上的click事件
					click : function (e, args) { 						
						var label = args.label;//通过args获取饼图参数
					    alert("当前选中的情感为'"+args.label+"'；\n将跳转至情感为'"+args.label+"'对应的数据页面中.....");
							//+args.value
					//页面转场跳转到topic2.html,并将信息传递过去	
					     $.mobile.changePage( "topic2.html", { 
							type: "get",
							data: {
								name:"chufei",
								topic:label			
							},
							transition: "slideup"
					     });

					}
				}).wijbubblechart("endUpdate");*/
		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});

				$("#Btn1910").click(function () {
					$("#wijbubblechart")
					.wijbubblechart("option", "header", { text: "1910年各主题的分布情况" })
					.wijbubblechart("option", "seriesList", data1910);

				});
				$("#Btn2010").click(function () {
					$("#wijbubblechart")
					.wijbubblechart("option", "header", { text: "2010年各主题分布情况" })
					.wijbubblechart("option", "seriesList", data2010);

				});
}

</script>
</div><!--End Page--->
</body>
</html>

