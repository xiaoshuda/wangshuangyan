<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <title>IBM EB-3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--jQuery References-->
    
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="css/jquery.mobile-1.3.1.css" rel="stylesheet" type="text/css" title="rocket-jqueryui">

    <!--Wijmo Widgets CSS-->
    <link href="css/jquery.wijmo-pro.all.3.20131.7.min.css" rel="stylesheet" type="text/css">

    <!--Wijmo Widgets JavaScript-->
    <script src="js/jquery.wijmo-open.all.3.20131.7.min.js" type="text/javascript"></script>
    <script src="js/jquery.wijmo-pro.all.3.20131.7.min.js" type="text/javascript"></script>
   
</head>
<body>
<div data-role="page" data-theme="c" id="l1" data-position="fixed">


            <div data-role="header" data-theme="d" data-position="fixed">
                <a href="index.html" data-ajax="false" data-icon="back">Back</a>
		<h4>趋势走向</h4>
            </div>
            <div data-role="content">
		<div>	
			<div id="wijlinechart" data-role="wijlinechart" class="ui-widget ui-widget-content ui-corner-all" style="width: 100%; height: 475px">
			</div>
		</div>
	    </div>
	   <div data-role="footer" data-theme="d" data-position="fixed">
                <h4>@IBM 深蓝-第3队</h4>
           </div>


<script type="text/javascript">
		$(document).bind('pageinit',function(){ 
			//$(document).bind( "pagebeforechange", beforechange);
			$(document).bind("pagechange",afterchange);
		});
		//转场成功之前触发，
		function beforechange( e, data ) {
		}
		function afterchange(e,data){	
			var data1 = {x:["1月","2月","3月","4月","5月","6月","7月","8月"],y:[10,20,30,40,50,60,70,80]};
			var data2 = {x:["1月","2月","3月","4月","5月","6月","7月","8月"],y:[1,2,3,4,5,6,7,8]};
			var data3 = {x:["1月","2月","3月","4月","5月","6月","7月","8月"],y:[2,3,4,5,6,7,8,9]};
			var data4 = {x:["1月","2月","3月","4月","5月","6月","7月","8月"],y:[3,4,5,6,7,8,9,10]};
	$.ajax({
		type : "POST",
        url  : "",
		//url  : "http://9.181.142.107:8082/FinalDemo/AndroidController",
		data : {'flag':'analysis','keyWord':'tendency','load':'true'},
		success : function(data) {
			var result = eval("("+data+")");
			var all = result.all;
			var negative = result.negative;
			var positive = result.positive;
			var netual = result.netual;
				$("#wijlinechart").wijlinechart("beginUpdate");
				$("#wijlinechart").wijlinechart({
					showChartLabels: false,
					axis: {
						y: {
							text: "微博数"

						},
						x: {
							text: ""
						}
					},
					header: {
						text: "不同情感倾向的微博数发展趋势对比"
					},
					hint: {
						content: function () {
							return "微博数目为："+this.y;
						},
						offsetY: -10
					},					
					legend: {
						visible: true
					},
					seriesList: [
					{
						label: "微博总数",
						legendEntry: true,
						data:all,
						markers: {
							visible: true,
							type: "circle"
						}
					},{
						label: "正面相关",
						legendEntry: true,
						data: positive,
						markers: {
							visible: true,
							type: "circle"
						}
					},{
						label: "中性相关",
						legendEntry: true,
						data: netual,
						markers: {
							visible: true,
							type: "circle"
						}
					},{
						label: "负面相关",
						legendEntry: true,
						data: negative,
						markers: {
							visible: true,
							type: "circle"
						}
					}],
					seriesStyles: [
						{ stroke: "#CC333F", "stroke-width": 3 , opacity: 0.5},
						{ stroke: "#00A0B0", "stroke-width": 3 , opacity: 0.5},
						{ stroke: "#EDC951", "stroke-width": 3 , opacity: 0.5},
						{ stroke: "green", "stroke-width": 3 , opacity: 0.5}
					],
					seriesHoverStyles: [{
						"stroke-width": 4, opacity: 0.7
					}],
					//lineChart上的click事件
					click : function (e, args) { 						
						var value = args.valY;//通过args获取饼图参数
						var month = args.valX;
					    //alert("当前选中的月份为'"+month+"'；\n将跳转至'"+month+"'的数据页面中.....");
					//页面转场跳转到tendency2.html,并将信息传递过去	
					     $.mobile.changePage( "tendency2.html", { 
							type: "get",
							data: {
								name:"chufei",
								month:month			
							},
							transition: "slideup"
					     });

					}
				});
				$("#wijlinechart").wijlinechart("endUpdate");
		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});
		}

</script>
</div><!--End Page--->
</body>
</html>

