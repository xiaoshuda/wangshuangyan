<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Downloads - Wijmo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

    <!--jQuery References-->
    <script type="text/javascript" async="" src="js/ga.js"></script>
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" title="rocket-jqueryui">

    <!--Wijmo Widgets CSS-->
    <link href="css/jquery.wijmo-pro.all.3.20131.7.min.css" rel="stylesheet" type="text/css">

    <!--Wijmo Widgets JavaScript-->
    <script src="js/jquery.wijmo-open.all.3.20131.7.min.js" type="text/javascript"></script>
    <script src="js/jquery.wijmo-pro.all.3.20131.7.min.js" type="text/javascript"></script>
    <style type="text/css">
        .v3-adaptive img
        {
            width: 100%;
        }
    </style>
</head>
<body>
<div data-role="appviewpage" data-title="Overview">
    <div data-role="content">
<table id="wijgrid" style="width:100%;height:400px;">ttt</table>
        <div id="wijbarchart" data-role="wijbarchart" style="width: 100%; height: 400px">
        </div>
	    <script type="text/javascript">

 $(document).ready(function () {
//通过ajax返回数据填充grid
			$("#wijgrid").wijgrid({
				data: new wijdatasource({
					proxy: new wijhttpproxy({
						url:"http://9.123.146.141:8080/testFei/Wijmo-Pro.3.20131.7/Samples/WidgetExplorerMobile/data.json",
						//"http://9.123.146.141:8080/testFei/Wijmo-Pro.3.20131.7/Samples/WidgetExplorerMobile/data.json",此处出现错误，错误提醒为chrome不支持跨域请求。此时若将其改为localhost即可。与浏览器中输入保持一致即可。
						//"http://ws.geonames.org/searchJSON",若为跨欲请求，则使用jsonp为dataType
						dataType: "json",
						data: {
							featureClass: "P",
							style: "full",
							maxRows: 5,
							name_startsWith: "ab"
						},
						key: "geonames"
					}),
					reader: new wijarrayreader([
						{ name: "label", mapping: function (item) { return item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName } },
						{ name: "name", mapping: "name" },
						{ name: "countryCode", mapping: "countryCode" }
					])
				}),
				allowPaging:true,
				pageSize:15,
				highlightCurrentCell:true,
				scrollMode:"none"

			});

/*----------------------------华丽丽的分割线------------------------------向后台传递信息，并以grid/barChart/bubbleChart形式展现数据---------------------------*/


	var dataWest = [];
	var dataEast = [];
	var dataCentral = [];
     			//通过ajax返回数据填充barchart
	$.ajax({
		type : "POST",
		url  : "http://localhost:8080/smarc_web_1/ff",
		data : {Name:"ttt"},
		success : function(data) {
			var result=eval("("+data+")");
			dataWest = result.dataWest;
			dataEast = result.dataEast;
			dataCentral =result.dataCentral;
		/*	$("#wijbarchart").wijbarchart({
					seriesList: [{
						dataSource: dataWest,
						label: "West",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataEast,
						label: "East",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataCentral,
						label: "Central",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}]
				});
		*/
		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});

	/*	var dataWest = [{
					Device: 'Desktops',
					Count: 5
				}, {
					Device: 'Notebooks',
					Count: 3
				}, {
					Device: 'Tablets',
					Count: 7
				}];

*/			
    });
	    </script>
    </div>
</div>
</body>
</html>
