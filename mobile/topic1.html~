<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <title>IBM EB-3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--jQuery References-->
    
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="css/jquery.mobile-1.3.1.css" rel="stylesheet" type="text/css" title="rocket-jqueryui">

    <!--Wijmo Widgets CSS-->
    <link href="css/jquery.wijmo-pro.all.3.20131.7.min.css" rel="stylesheet" type="text/css">

    <!--Wijmo Widgets JavaScript-->
    <script src="js/jquery.wijmo-open.all.3.20131.7.min.js" type="text/javascript"></script>
    <script src="js/jquery.wijmo-pro.all.3.20131.7.min.js" type="text/javascript"></script>
   
</head>
<body>
<div data-role="page" data-theme="c" id="l1" data-position="fixed">


            <div data-role="header" data-theme="d" data-position="fixed">
                <a href="index.html" data-ajax="false" data-icon="back">Back</a>
		<h4>主题分布情况</h4>
            </div>
            <div data-role="content" data-theme="c">
			<div id="wijbubblechart" data-role="wijbubblechart">
			</div>
	    </div>
	   <div data-role="footer" data-theme="d" data-position="fixed">
                <h4>@IBM 深蓝-第3队</h4>
           </div>


<script type="text/javascript">
		$(document).bind('pageinit',function(){ 
			$(document).bind("pagechange",afterchange);
		});

		function afterchange(e,data){	
				
	$.ajax({
		type : "POST",
		url  : "http://9.181.142.107:8082/FinalDemo/AndroidController",			
		data : {'flag':'analysis','keyWord':'topic','load':'true'},
		success : function(data) {
			var result = eval("("+data+")");
			var card = result.信用卡;
			var bank = result.网上银行;
			var measure = result.贷款额度;

//var data1 ={ x: [2006, 2007, 2008, 2009, 2010],y: [5, 6, 8, 7, 8.5], y1: [4, 4.4, 5.1, 5.5, 5.7]};
//var data2= { x: [2006, 2007, 2008, 2009, 2010],y: [3, 4, 6, 7.5, 8], y1: [2, 2.5, 3, 4, 5]};
//var data3 ={ x: [2006, 2007, 2008, 2009, 2010],y: [4, 5, 6.5, 7.3, 6.6], y1: [2, 2.5, 4.5, 6, 5.5]};
//var data4 = { x: [2006, 2007, 2008, 2009, 2010],y: [6, 1, 5, 2, 4], y1: [2, 3, 4.5, 1.5, 1]};	
			$("#wijbubblechart").wijbubblechart("beginUpdate").wijbubblechart({
					//minimumSize: 3,
					//MaximumSize: 5,
					chartLabel: {
						chartLabelFormatString: ""
					},
					axis: {
						y: {
							text: "关注度"

						},
						x: {
							text: ""
						}
					},
					hint: {
						content: function () {
							return  this.label+'有' + this.y + "条微博关注";
						}
					},
					header: {
						text: "各主题三个季度以来的微博关注度"
					},
					seriesList: [{
						label: "信用卡",
						legendEntry: true,
						data: card
					}, {
						label: "网上银行",
						legendEntry: true,
						data:bank
					}, {
						label: "贷款额度",
						legendEntry: true,
						data: measure
					}],
					//bubbleChart上的click事件
					click : function (e, args) { 						
						var label = args.label;//获取主题
						var quarter = args.data.x[args.index];//获取季度
					    alert("当前选中的主题为'"+quarter+"的"+args.label+"'\n\n将跳转至对应的数据页面中.....");
							//+args.value
					//页面转场跳转到topic2.html,并将信息传递过去	
					     $.mobile.changePage( "topic2.html", { 
							type: "get",
							data: {
								name:"chufei",
								topic:label,
								quarter:quarter			
							},
							transition: "slideup"
					     });

					}
				}).wijbubblechart("endUpdate");
				
		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});
}

</script>
</div><!--End Page--->
</body>
</html>

