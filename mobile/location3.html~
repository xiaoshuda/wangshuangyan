<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <title>Do It</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--jQuery References-->
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="css/jquery.mobile-1.3.1.css" rel="stylesheet" type="text/css" title="rocket-jqueryui">

    <!--Wijmo Widgets CSS-->
    <link href="css/jquery.wijmo-pro.all.3.20131.7.min.css" rel="stylesheet" type="text/css">

    <!--Wijmo Widgets JavaScript-->
    <script src="js/jquery.wijmo-open.all.3.20131.7.min.js" type="text/javascript"></script>
    <script src="js/jquery.wijmo-pro.all.3.20131.7.min.js" type="text/javascript"></script>
<script type="text/javascript">
//必须将pageinit的绑定放到head中，否则将触发两次加载
$(document).bind("pageinit",function(){
	console.log("pageinit must be defined in head tag");
	$(document).bind("pagechange",afterchange);
});
/*$(document).bind("mobileinit", function() {
　　console.log("Please wait");
});*/
</script>
</head>
<body>
<div data-role="page" id="v2">
    <link href="css/grid.css" rel="stylesheet" type="text/css">

            <div data-role="header" data-theme="d">
                <a href="sentiment1.html" data-ajax="false" data-icon="back">Back</a>
		<h4>地区分布：</h4>
            </div>
            <div data-role="content">
		<h5>您现在查看的内容是：<span id="title"></span>地区的实际数据</h5>
		<table id="wijgrid">
     		</table>		 
	   </div>
	   <div data-role="footer" data-theme="d">
                <h4>这是尾部信息～</h4>
           </div>

	<script type="text/javascript">
	//转场页面dom加载完成后触发
	function afterchange(e,data){
//		if ( typeof data.toPage != "string" ) {
				
	var name = data.options.data.name;
	var emotion = data.options.data.emotion;

	//alert("the change has happened........"+$("#title").val());
	$("#title").append(decodeURIComponent("\""+emotion+"\""));
	var name="chufei";
	var dataWest = [];
	var dataEast = [];
	var dataCentral = [];
		//通过ajax返回数据填充barchart
	$.ajax({
		type : "POST",
		url  : "http://localhost:8080/smarc_web_1/ff",
		data : {Name:name},
		success : function(data) {
			var result=eval("("+data+")");
			dataWest = result.dataWest;
			dataEast = result.dataEast;
			dataCentral =result.dataCentral;
 			$("#wijgrid").wijgrid({
                		allowSorting: false,
                		allowPaging: true,
               			pageSize: 3,
                		data: [
                    			[27, 'Canada', 'Adams, Craig', 'RW'],
                    			[43, 'Canada', 'Boucher, Philippe', 'D'],
                    			[24, 'Canada', 'Cooke, Matt', 'LW'],
                    			[87, 'Canada', 'Crosby, Sidney (C)', 'C'],
                    			[1, 'United States', 'Curry, John', 'G'], 
                		],
                		columns: [
                    			{ headerText: "姓名",color:"white",allowSizing:true,textAlignment:"center",width:"10%",backgroundColor:"white"},
                    			{ headerText: "内容",color:"green",textAlignment:"center" },
                    			{ headerText: "时间",aggregate:"min",allowSizing:true,textAlignment:"right",width:"10%" },
                    			{ headerText: "Position",visible:false}
                		],
				columnsAutogenerationMode: "merge",
				showRowHeader:false,
				highlightCurrentCell: false,
				//此处控制grid中实际行数据样式
                                rowStyleFormatter: function (args) {                                        
                                	if ((args.state === wijmo.grid.renderState.rendering) && (args.type & wijmo.grid.rowType.dataAlt)) {
                                           // args.$rows.find("td").css("font-style", "italic");
						args.$rows.find("td").css('color', 'red');
                                        }
                                    },
				//此处控制grid中实际每列数据样式
                                cellStyleFormatter: function (args) {
                                    args.$cell.css('backgroundColor', '#grey');
                                    args.$cell.css('color', 'black');
                                    args.$cell.css('border', 'solid 0px #fff');
                                    args.$cell.css('padding', '1px');
                                },
				//此处为event,当表重新设置大小时触发
				columnResized : function (e, args) {
					console.info(this);
					alert("ttt");
     
			        }

            		});


    var returnsValue; // Type:  any
    returnsValue = $("#wijgrid").wijgrid("columns");//获取列数据

		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});
}
///	}
	</script>
</div>
</body>
</html>
