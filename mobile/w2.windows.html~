<div data-role="appviewpage" data-title="客户服务">
	<div data-role="content">
		从json获得数据填充grid/barchart
           <table id="wijgrid" style="width:100%;height:400px;">ttt</table>
	   <div id="wijbarchart" data-role="wijbarchart" style="width: 100%; height: 400px">ttt</div>


<!----------------------------华丽丽的分割线------------------------------向后台传递信息，并以grid/barChart/bubbleChart形式展现数据----------------------------->


<script type="text/javascript">
		$(document).one("wijappviewpageinit", function () {
			//通过ajax返回数据填充grid
			$("#wijgrid").wijgrid({
				data: new wijdatasource({
					proxy: new wijhttpproxy({
						url:"data.json",
						//"http://ws.geonames.org/searchJSON",若为跨欲请求，则使用jsonp为dataType
						dataType: "json",
						data: {
							featureClass: "P",
							style: "full",
							maxRows: 5,
							name_startsWith: "ab"
						},
						key: "geonames"
					}),
					reader: new wijarrayreader([
						{ name: "label", mapping: function (item) { return item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName } },
						{ name: "name", mapping: "name" },
						{ name: "countryCode", mapping: "countryCode" }
					])
				}),
				allowPaging:true,
				pageSize:15,
				highlightCurrentCell:true,
				scrollMode:"none"

			});
		
		
/*----------------------------华丽丽的分割线------------------------------向后台传递信息，并以grid/barChart/bubbleChart形式展现数据---------------------------*/

			//通过Array返回数据填充barchart
		/*	var dataWest = [{
					Device: 'Desktops',
					Count: 5
				}, {
					Device: 'Notebooks',
					Count: 3
				}, {
					Device: 'Tablets',
					Count: 7
				}],

				dataEast = [{
					Device: 'Desktops',
					Count: 1
				}, {
					Device: 'Notebooks',
					Count: 6
				}, {
					Device: 'Tablets',
					Count: 8
				}],

				dataCentral = [{
					Device: 'Desktops',
					Count: 2
				}, {
					Device: 'Notebooks',
					Count: 4.5
				}, {
					Device: 'Tablets',
					Count: 2.5
				}];

				$("#wijbarchart").wijbarchart("beginUpdate");
				$("#wijbarchart").wijbarchart({
					seriesList: [{
						dataSource: dataWest,
						label: "West",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataEast,
						label: "East",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataCentral,
						label: "Central",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}]
				});
				$("#wijbarchart").wijbarchart("endUpdate");
		*/
		//通过Ajax返回json样式的String,对其进行处理后向barChart中填充
	var dataWest = [];
	var dataEast = [];
	var dataCentral = [];
     			//通过ajax返回数据填充barchart
	$.ajax({
		type : "POST",
		url  : "http://localhost:8080/smarc_web_1/ff",
		data : {Name:"ttt"},
		success : function(data) {
			var result=eval("("+data+")");
			dataWest = result.dataWest;
			dataEast = result.dataEast;
			dataCentral =result.dataCentral;
			$("#wijbarchart").wijbarchart({
					seriesList: [{
						dataSource: dataWest,
						label: "West",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataEast,
						label: "East",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}, {
						dataSource: dataCentral,
						label: "Central",
						legendEntry: true,
						data: { x: { bind: "Device" }, y: { bind: "Count"} }
					}]
				});
			//alert("ttttt");
		},
		error:function(data){
			alert("error................");
		},
		dataType : "text"
	});


		});
            

	</script>


	</div>
</div>

